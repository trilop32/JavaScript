<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        #search-input {
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        #search-button {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #movies-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            color: black;
            background-color: white;
        }

        .movie-card {
            width: 200px;
            margin: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            overflow: hidden;
            cursor: pointer;
        }

        .movie-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .movie-card .title {
            padding: 10px;
            background-color: #f0f0f0;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
        }

        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <input type="text" id="search-input" placeholder="Введите название фильма">
    <button id="search-button">Искать</button>
    <div id="movies-container"></div>
    <div id="movie-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2 id="movie-title"></h2>
            <img id="movie-poster" src="" alt="">
            <p><strong>Год:</strong> <span id="movie-year"></span></p>
            <p><strong>Рейтинг:</strong> <span id="movie-rating"></span></p>
            <p><strong>Жанр:</strong> <span id="movie-genre"></span></p>
            <p><strong>Сюжет:</strong> <span id="movie-plot"></span></p>
        </div>
    </div>

    <script>
        const apiKey = 'a2b07930';
        const moviesContainer = document.getElementById('movies-container');
        const searchInput = document.getElementById('search-input');
        const searchButton = document.getElementById('search-button');
        const movieModal = document.getElementById('movie-modal');
        const closeButton = document.querySelector('.close-button');
        const movieTitle = document.getElementById('movie-title');
        const moviePoster = document.getElementById('movie-poster');
        const movieYear = document.getElementById('movie-year');
        const movieRating = document.getElementById('movie-rating');
        const movieGenre = document.getElementById('movie-genre');
        const moviePlot = document.getElementById('movie-plot');
        let currentPage = 1;
        searchButton.addEventListener('click', searchMovies);
        closeButton.addEventListener('click', closeModal);
        function searchMovies() {
            const searchTerm = searchInput.value;
            if (searchTerm.trim() === '') {
                return;
            }
            fetch(`https://www.omdbapi.com/?apikey=${apiKey}&s=${searchTerm}&page=${currentPage}`)
                .then(response => response.json())
                .then(data => {
                    if (data.Response === 'True') {
                        displayMovies(data.Search);
                        if (data.totalResults > 10 && data.Search.length === 10) {
                            currentPage++;
                        }
                    } else {
                        alert('Фильм не найден.');
                    }
                })
                .catch(error => console.error('Ошибка:', error));
        }

        function displayMovies(movies) {
            moviesContainer.innerHTML = '';
            movies.forEach(movie => {
                const movieDiv = document.createElement('div');
                movieDiv.className = 'movie';
                movieDiv.innerHTML = `
            <img src="${movie.Poster}" alt="${movie.Title}">
            <h3>${movie.Title}</h3>
          `;
                movieDiv.addEventListener('click', () => {
                    getMovieDetails(movie.imdbID);
                });
                moviesContainer.appendChild(movieDiv);
            });
        }
        function addLoadButton(totalResults) {
            const loadButton = document.createElement('button');
            loadButton.textContent = 'Загрузить больше';
            loadButton.addEventListener('click', () => {
                currentPage++;
                if (currentPage * 10 <= totalResults) {
                    isLoading = true;
                    fetchMovies(searchInput.value, currentPage);
                    loadButton.disabled = true;
                } else {
                    loadButton.textContent = 'Больше нет фильмов';
                    loadButton.disabled = true;
                }
            });
            moviesContainer.appendChild(loadButton);
        }
        function getMovieDetails(imdbID) {
            fetch(`https://www.omdbapi.com/?apikey=${apiKey}&i=${imdbID}`)
                .then(response => response.json())
                .then(data => {
                    if (data.Response === 'True') {
                        movieTitle.textContent = data.Title;
                        moviePoster.src = data.Poster;
                        movieYear.textContent = data.Year;
                        movieRating.textContent = data.imdbRating;
                        movieGenre.textContent = data.Genre;
                        moviePlot.textContent = data.Plot;
                        movieModal.style.display = 'block';
                    } else {
                        alert('Информация о фильме недоступна.');
                    }
                })
                .catch(error => console.error('Ошибка:', error));
        }
        function closeModal() {
            movieModal.style.display = 'none';
        }

    </script>
</body>

</html>